
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Ø£Ø¯Ø§Ø© TechTouch Ø§Ù„Ø°ÙƒÙŠØ© Ù„Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ù‡ÙˆØ§ØªÙ ÙˆØ§Ù„Ù…ÙˆØ§ØµÙØ§Øª Ø¨Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ." />
    <meta name="robots" content="index, follow">
    
    <!-- Google Analytics 4 (Professional Setup) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-63BBPLQ343"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-63BBPLQ343', {
        anonymize_ip: true,
        send_page_view: true
      });
    </script>

    <link rel="canonical" href="https://kinanmjeed88.github.io/tool-analysis.html">
    <title>Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ù‡ÙˆØ§ØªÙ (AI) | TechTouch</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: { extend: { fontFamily: { sans: ['Segoe UI', 'Tahoma', 'Geneva', 'Verdana', 'sans-serif'] } } }
        }
    </script>
    <link rel="stylesheet" href="assets/css/style.css">
    <script src="https://unpkg.com/lucide@latest"></script>
    <script type="importmap">
    {
      "imports": {
        "@google/genai": "https://esm.sh/@google/genai@0.1.1"
      }
    }
    </script>
    <script>
        window.process = { env: { API_KEY: '' } };
    </script>
</head>
<body class="bg-gray-50 text-gray-900 dark:bg-gray-900 dark:text-gray-100 transition-colors duration-200 flex flex-col min-h-screen">
    
    <header class="w-full bg-white dark:bg-gray-900 shadow-sm border-b border-gray-200 dark:border-gray-800 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-full overflow-hidden border-2 border-white dark:border-gray-800 shadow-md">
                    <img src="assets/images/me.jpg" alt="Profile photo" class="w-full h-full object-cover" />
                </div>
                <span class="font-bold text-lg text-gray-800 dark:text-gray-100 hidden sm:block">ÙƒÙ†Ø§Ù† Ø§Ù„ØµØ§Ø¦Øº</span>
            </div>
            <a href="index.html" class="text-xl font-black text-blue-600 dark:text-blue-400 tracking-tight">TechTouch</a>
            <button id="theme-toggle" class="p-2 rounded-lg bg-gray-100 dark:bg-gray-800 hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors">
                <i data-lucide="moon" class="w-5 h-5 text-gray-600 dark:hidden"></i>
                <i data-lucide="sun" class="w-5 h-5 text-yellow-500 hidden dark:block"></i>
            </button>
        </div>
    </header>

    <nav class="w-full bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700 shadow-sm sticky top-16 z-30 overflow-x-auto">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex items-center justify-center space-x-reverse space-x-2 h-10 min-w-max">
                 <a href="index.html" class="nav-link flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-bold transition-all text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">
                    <i data-lucide="home" class="w-3.5 h-3.5"></i><span>Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©</span>
                </a>
                 <a href="tools.html" class="nav-link flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-bold transition-all text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">
                    <i data-lucide="wrench" class="w-3.5 h-3.5"></i><span>Ø§Ù„Ø£Ø¯ÙˆØ§Øª</span>
                </a>
                <a href="about.html" class="nav-link flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-bold transition-all text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700">
                    <i data-lucide="info" class="w-3.5 h-3.5"></i><span>Ø­ÙˆÙ„</span>
                </a>
            </div>
        </div>
    </nav>

    <main class="max-w-4xl mx-auto px-4 py-12 animate-fade-in">
        
        <div class="text-center mb-10">
            <div class="inline-flex items-center justify-center p-4 bg-orange-100 dark:bg-orange-900/30 rounded-full mb-4">
                <i data-lucide="scale" class="w-10 h-10 text-orange-600 dark:text-orange-400"></i>
            </div>
            <h1 class="text-3xl font-bold text-gray-900 dark:text-white mb-2">Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ù‡ÙˆØ§ØªÙ Ø§Ù„Ø°ÙƒÙŠØ©</h1>
            <p class="text-gray-600 dark:text-gray-400 max-w-xl mx-auto">
                Ø§Ø®ØªØ± Ø¬Ù‡Ø§Ø²ÙŠÙ† Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© ÙˆØ³ÙŠÙ‚ÙˆÙ… Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ Ø¨Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª Ø§Ù„Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØ¥Ø¹Ø·Ø§Ø¦Ùƒ Ø§Ù„Ø®Ù„Ø§ØµØ©.
            </p>
        </div>

        <div class="bg-white dark:bg-gray-800 rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 p-6 md:p-8">
            
            <div class="mb-8 p-4 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded-lg">
                <label class="block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2">
                    ğŸ”‘ Ù…ÙØªØ§Ø­ Gemini API
                </label>
                <input type="password" id="apiKeyInput" placeholder="Ø§Ù„ØµÙ‚ Ù…ÙØªØ§Ø­ API Ø§Ù„Ø®Ø§Øµ Ø¨Ùƒ Ù‡Ù†Ø§..." class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:ring-2 focus:ring-orange-500 outline-none" />
            </div>

            <!-- Tab Switcher -->
            <div class="flex justify-center gap-4 mb-8">
                <button id="modeSelect" class="px-6 py-2 bg-orange-600 text-white rounded-full font-bold shadow-md transition-all">Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
                <button id="modeManual" class="px-6 py-2 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-full font-bold hover:bg-gray-300 dark:hover:bg-gray-600 transition-all">Ø¨Ø­Ø« Ø­Ø± (Ø£ÙŠ Ù…Ù†ØªØ¬)</button>
            </div>

            <!-- Database Selection Mode -->
            <div id="selectionArea" class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
                <!-- Phone A -->
                <div class="p-4 bg-gray-50 dark:bg-gray-900/50 rounded-xl border border-gray-200 dark:border-gray-700">
                    <h3 class="font-bold text-gray-900 dark:text-white mb-3 text-center">Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø£ÙˆÙ„ (Ø£)</h3>
                    <select id="brandA" class="w-full p-2 mb-2 rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-white">
                        <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø´Ø±ÙƒØ©</option>
                    </select>
                    <select id="modelA" class="w-full p-2 rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-white" disabled>
                        <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„</option>
                    </select>
                </div>

                <!-- Phone B -->
                <div class="p-4 bg-gray-50 dark:bg-gray-900/50 rounded-xl border border-gray-200 dark:border-gray-700">
                    <h3 class="font-bold text-gray-900 dark:text-white mb-3 text-center">Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø«Ø§Ù†ÙŠ (Ø¨)</h3>
                    <select id="brandB" class="w-full p-2 mb-2 rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-white">
                        <option value="">Ø§Ø®ØªØ± Ø§Ù„Ø´Ø±ÙƒØ©</option>
                    </select>
                    <select id="modelB" class="w-full p-2 rounded border border-gray-300 dark:border-gray-600 dark:bg-gray-800 dark:text-white" disabled>
                        <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„</option>
                    </select>
                </div>
            </div>

            <!-- Manual Input Mode (Hidden by default) -->
            <div id="manualArea" class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8 hidden">
                <div>
                    <label class="block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2">Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø£ÙˆÙ„</label>
                    <input type="text" id="manualItem1" placeholder="Ù…Ø«Ø§Ù„: PlayStation 5" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white" />
                </div>
                <div>
                    <label class="block text-sm font-bold text-gray-700 dark:text-gray-300 mb-2">Ø§Ù„Ù…Ù†ØªØ¬ Ø§Ù„Ø«Ø§Ù†ÙŠ</label>
                    <input type="text" id="manualItem2" placeholder="Ù…Ø«Ø§Ù„: Xbox Series X" class="w-full p-3 rounded-lg border border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white" />
                </div>
            </div>

            <button id="analyzeBtn" class="w-full py-4 bg-gradient-to-r from-orange-600 to-red-500 hover:from-orange-700 hover:to-red-600 text-white font-bold rounded-xl shadow-lg transform active:scale-95 transition-all flex items-center justify-center gap-2">
                <i data-lucide="sparkles" class="w-5 h-5"></i>
                <span>Ù…Ù‚Ø§Ø±Ù†Ø© ÙˆØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¢Ù†</span>
            </button>

            <!-- Result Area -->
            <div id="resultArea" class="mt-8 hidden">
                <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-4 border-b pb-2 dark:border-gray-700 flex items-center gap-2">
                    <i data-lucide="file-text" class="w-5 h-5 text-orange-500"></i>
                    Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ø´Ø§Ù…Ù„:
                </h3>
                <div id="loader" class="hidden flex justify-center py-8">
                    <div class="animate-spin rounded-full h-10 w-10 border-b-2 border-orange-600"></div>
                </div>
                <div id="markdownOutput" class="prose dark:prose-invert max-w-none text-gray-700 dark:text-gray-300 bg-gray-50 dark:bg-gray-900/50 p-6 rounded-xl border border-gray-200 dark:border-gray-700 min-h-[200px]">
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-300 py-10 mt-auto border-t border-gray-800">
        <div class="max-w-7xl mx-auto px-4 flex flex-col items-center">
            
            <div class="flex items-center justify-center gap-4 mb-8">
                <!-- Facebook -->
                <a href="https://www.facebook.com/share/1EsapVHA6W/" target="_blank" class="w-10 h-10 flex items-center justify-center rounded-full bg-gray-800 hover:bg-[#1877F2] hover:text-white transition-all transform hover:scale-110 shadow-lg border border-gray-700">
                    <i data-lucide="facebook" class="w-5 h-5"></i>
                </a>
                <!-- Instagram -->
                <a href="https://www.instagram.com/techtouch0" target="_blank" class="w-10 h-10 flex items-center justify-center rounded-full bg-gray-800 hover:bg-[#E4405F] hover:text-white transition-all transform hover:scale-110 shadow-lg border border-gray-700">
                    <i data-lucide="instagram" class="w-5 h-5"></i>
                </a>
                <!-- TikTok -->
                <a href="https://www.tiktok.com/@techtouch6" target="_blank" class="w-10 h-10 flex items-center justify-center rounded-full bg-gray-800 hover:bg-black hover:border-gray-600 hover:text-white transition-all transform hover:scale-110 shadow-lg border border-gray-700">
                    <svg class="w-5 h-5 fill-current" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19.59 6.69a4.83 4.83 0 0 1-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 0 1-5.2 1.74 2.89 2.89 0 0 1 2.31-4.64 2.93 2.93 0 0 1 .88.13V9.4a6.84 6.84 0 0 0-1-.05A6.33 6.33 0 0 0 5 20.1a6.34 6.34 0 0 0 10.86-4.43v-7a8.16 8.16 0 0 0 4.77 1.52v-3.4a4.85 4.85 0 0 1-1-.1z"/></svg>
                </a>
                <!-- YouTube -->
                <a href="https://youtube.com/@kinanmajeed?si=I2yuzJT2rRnEHLVg" target="_blank" class="w-10 h-10 flex items-center justify-center rounded-full bg-gray-800 hover:bg-[#FF0000] hover:text-white transition-all transform hover:scale-110 shadow-lg border border-gray-700">
                    <i data-lucide="youtube" class="w-5 h-5"></i>
                </a>
                 <!-- Telegram -->
                 <a href="https://t.me/techtouch7" target="_blank" class="w-10 h-10 flex items-center justify-center rounded-full bg-gray-800 hover:bg-[#229ED9] hover:text-white transition-all transform hover:scale-110 shadow-lg border border-gray-700">
                    <i data-lucide="send" class="w-5 h-5 ml-0.5"></i>
                </a>
            </div>

            <p class="text-sm text-gray-500 font-medium">Â© 2024 TechTouch. Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ‚ Ù…Ø­ÙÙˆØ¸Ø© ÙƒÙ†Ø§Ù† Ø§Ù„ØµØ§Ø¦Øº.</p>
        </div>
    </footer>

    <script src="assets/js/app.js"></script>

    <!-- App Logic -->
    <script type="module">
        import { GoogleGenAI } from "@google/genai";
        import { phonesDatabase } from "./assets/js/phones-data.js";

        // DOM Elements
        const modeSelectBtn = document.getElementById('modeSelect');
        const modeManualBtn = document.getElementById('modeManual');
        const selectionArea = document.getElementById('selectionArea');
        const manualArea = document.getElementById('manualArea');
        
        const brandA = document.getElementById('brandA');
        const modelA = document.getElementById('modelA');
        const brandB = document.getElementById('brandB');
        const modelB = document.getElementById('modelB');
        
        const analyzeBtn = document.getElementById('analyzeBtn');
        const apiKeyInput = document.getElementById('apiKeyInput');
        const resultArea = document.getElementById('resultArea');
        const markdownOutput = document.getElementById('markdownOutput');
        const loader = document.getElementById('loader');

        let currentMode = 'select'; // 'select' or 'manual'

        // 1. Populate Dropdowns
        function populateBrands() {
            const brands = phonesDatabase.map(b => b.brand);
            [brandA, brandB].forEach(select => {
                select.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„Ø´Ø±ÙƒØ©</option>';
                brands.forEach(brand => {
                    const option = document.createElement('option');
                    option.value = brand;
                    option.textContent = brand;
                    select.appendChild(option);
                });
            });
        }

        function handleBrandChange(brandSelect, modelSelect) {
            const selectedBrand = brandSelect.value;
            modelSelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…ÙˆØ¯ÙŠÙ„</option>';
            modelSelect.disabled = true;

            if (selectedBrand) {
                const brandData = phonesDatabase.find(b => b.brand === selectedBrand);
                if (brandData) {
                    brandData.phones.forEach(phone => {
                        const option = document.createElement('option');
                        option.value = phone.id;
                        option.textContent = phone.name;
                        modelSelect.appendChild(option);
                    });
                    modelSelect.disabled = false;
                }
            }
        }

        brandA.addEventListener('change', () => handleBrandChange(brandA, modelA));
        brandB.addEventListener('change', () => handleBrandChange(brandB, modelB));

        // 2. Mode Switching
        modeSelectBtn.addEventListener('click', () => {
            currentMode = 'select';
            selectionArea.classList.remove('hidden');
            manualArea.classList.add('hidden');
            modeSelectBtn.classList.add('bg-orange-600', 'text-white');
            modeSelectBtn.classList.remove('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
            modeManualBtn.classList.remove('bg-orange-600', 'text-white');
            modeManualBtn.classList.add('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
        });

        modeManualBtn.addEventListener('click', () => {
            currentMode = 'manual';
            selectionArea.classList.add('hidden');
            manualArea.classList.remove('hidden');
            modeManualBtn.classList.add('bg-orange-600', 'text-white');
            modeManualBtn.classList.remove('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
            modeSelectBtn.classList.remove('bg-orange-600', 'text-white');
            modeSelectBtn.classList.add('bg-gray-200', 'dark:bg-gray-700', 'text-gray-700', 'dark:text-gray-300');
        });

        // Initialize
        populateBrands();

        // 3. Compare Logic
        analyzeBtn.addEventListener('click', async () => {
            // Get API Key
            let apiKey = apiKeyInput.value.trim();
            if (!apiKey && window.process && window.process.env.API_KEY) {
                apiKey = window.process.env.API_KEY;
            }
            if (!apiKey) {
                alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù…ÙØªØ§Ø­ API Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©.");
                return;
            }
            window.process.env.API_KEY = apiKey;

            let prompt = "";

            if (currentMode === 'select') {
                const idA = modelA.value;
                const idB = modelB.value;

                if (!idA || !idB) {
                    alert("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù‡Ø§ØªÙÙŠÙ† Ù„Ù„Ù…Ù‚Ø§Ø±Ù†Ø©.");
                    return;
                }

                // Find Specs
                let phoneA, phoneB;
                phonesDatabase.forEach(brand => {
                    const foundA = brand.phones.find(p => p.id === idA);
                    if (foundA) phoneA = foundA;
                    const foundB = brand.phones.find(p => p.id === idB);
                    if (foundB) phoneB = foundB;
                });

                prompt = `
                    ØªØµØ±Ù ÙƒØ®Ø¨ÙŠØ± ØªÙ‚Ù†ÙŠ Ù…Ø­ØªØ±Ù. Ù‚Ù… Ø¨Ø¹Ù…Ù„ Ù…Ù‚Ø§Ø±Ù†Ø© ØªÙØµÙŠÙ„ÙŠØ© Ø¨ÙŠÙ† Ø§Ù„Ù‡Ø§ØªÙÙŠÙ† Ø§Ù„ØªØ§Ù„ÙŠÙŠÙ† Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª Ø§Ù„Ù…Ø±ÙÙ‚Ø© ÙˆÙ…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ:
                    
                    Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ø£ÙˆÙ„: ${phoneA.name}
                    Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª: ${JSON.stringify(phoneA.specs)}

                    Ø§Ù„Ù‡Ø§ØªÙ Ø§Ù„Ø«Ø§Ù†ÙŠ: ${phoneB.name}
                    Ø§Ù„Ù…ÙˆØ§ØµÙØ§Øª: ${JSON.stringify(phoneB.specs)}

                    Ø§Ù„Ù…Ø·Ù„ÙˆØ¨:
                    1. Ø¬Ø¯ÙˆÙ„ Ù…Ù‚Ø§Ø±Ù†Ø© Ø³Ø±ÙŠØ¹.
                    2. Ù†Ù‚Ø§Ø· ØªÙÙˆÙ‚ ${phoneA.name}.
                    3. Ù†Ù‚Ø§Ø· ØªÙÙˆÙ‚ ${phoneB.name}.
                    4. Ø§Ù„Ø­ÙƒÙ… Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ: Ø£ÙŠÙ‡Ù…Ø§ Ø£ÙØ¶Ù„ ÙˆÙ„Ù…Ø§Ø°Ø§ØŸ
                `;

            } else {
                const item1 = document.getElementById('manualItem1').value.trim();
                const item2 = document.getElementById('manualItem2').value.trim();

                if (!item1 || !item2) {
                    alert("ÙŠØ±Ø¬Ù‰ ÙƒØªØ§Ø¨Ø© Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ÙŠÙ†.");
                    return;
                }

                prompt = `
                    ØªØµØ±Ù ÙƒØ®Ø¨ÙŠØ± ØªÙ‚Ù†ÙŠ. Ù‚Ø§Ø±Ù† Ø¨ÙŠÙ†:
                    Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø£ÙˆÙ„: ${item1}
                    Ø§Ù„Ø·Ø±Ù Ø§Ù„Ø«Ø§Ù†ÙŠ: ${item2}
                    
                    Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø© ÙŠØ¬Ø¨ Ø£Ù† ØªØ´Ù…Ù„ Ø§Ù„Ù…ÙˆØ§ØµÙØ§ØªØŒ Ø§Ù„Ù…Ù…ÙŠØ²Ø§ØªØŒ Ø§Ù„Ø¹ÙŠÙˆØ¨ØŒ ÙˆØ§Ù„Ø®Ù„Ø§ØµØ©.
                `;
            }

            // UI Loading
            resultArea.classList.remove('hidden');
            markdownOutput.innerHTML = '';
            loader.classList.remove('hidden');
            analyzeBtn.disabled = true;
            analyzeBtn.classList.add('opacity-50', 'cursor-not-allowed');

            try {
                const ai = new GoogleGenAI({ apiKey: window.process.env.API_KEY });
                const response = await ai.models.generateContent({
                    model: 'gemini-2.5-flash-latest',
                    contents: prompt,
                });

                const text = response.text;
                
                // Markdown Formatting
                const formattedText = text
                    .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')
                    .replace(/^## (.*$)/gim, '<h2 class="text-xl font-bold mt-6 mb-3 text-orange-600 border-b border-gray-200 pb-1">$1</h2>')
                    .replace(/^### (.*$)/gim, '<h3 class="text-lg font-bold mt-4 mb-2 text-gray-800 dark:text-white">$1</h3>')
                    .replace(/\n/g, '<br>');

                loader.classList.add('hidden');
                markdownOutput.innerHTML = formattedText;

            } catch (error) {
                console.error("Error:", error);
                loader.classList.add('hidden');
                markdownOutput.innerHTML = `<p class="text-red-500 font-bold">Ø­Ø¯Ø« Ø®Ø·Ø£. ØªØ£ÙƒØ¯ Ù…Ù† Ù…ÙØªØ§Ø­ API.<br>${error.message}</p>`;
            } finally {
                analyzeBtn.disabled = false;
                analyzeBtn.classList.remove('opacity-50', 'cursor-not-allowed');
            }
        });
    </script>
</body>
</html>
